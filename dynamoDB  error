# Check if voucher code is empty (instead of VoucherID)
if not item.get('VoucherCode'):  # Check for VoucherCode being empty
    vouchers_to_generate.append(item)

# In the update step, add a print statement to debug
for voucher in generated_vouchers:
    print(f"Updating DynamoDB for PNR: {voucher['PNR']} with VoucherCode: {voucher['VoucherCode']}")
    try:
        table.update_item(
            Key={
                'PNR': voucher['PNR']
            },
            UpdateExpression="SET VoucherID = :vid, VoucherCode = :vcode, VoucherExpiryDate = :vexp",
            ExpressionAttributeValues={
                ':vid': voucher['VoucherID'],
                ':vcode': voucher['VoucherCode'],
                ':vexp': voucher['VoucherExpiryDate']
            }
        )
    except ClientError as e:
        print(f"Error updating voucher in DynamoDB: {e.response['Error']['Message']}")
