try:
    # Make the API request
    with urllib.request.urlopen(req) as response:
        response_body = response.read()
        response_data = json.loads(response_body)
        # Log the successful response
        print(f"Successfully generated voucher for PNR {voucher['PNR']}: {response_data}")
        # Update the DynamoDB entry here (code for this part should be included)
except urllib.error.HTTPError as e:
    error_message = e.read().decode('utf-8')
    print(f"Error generating voucher for PNR {voucher['PNR']}: {error_message}")  # Log the error response
    return {
        'statusCode': e.code,
        'body': {
            "error": "An error occurred while processing your request.",
            "details": error_message
        }
    }
except Exception as e:
    print(f"An unexpected error occurred for PNR {voucher['PNR']}: {str(e)}")
    return {
        'statusCode': 500,
        'body': str(e)
    }
