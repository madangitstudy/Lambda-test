{
  "id": "TVUVPJ-b2eb72",
  "data": {
    "type": "event",
    "attributes": {
      "profile": {
        "data": {
          "type": "profile",
          "attributes": {
            "email": "dylanreeveswasik@gmail.com"
          }
        }
      },
      "metric": {
        "data": {
          "type": "metric",
          "attributes": {
            "name": "OTPG voucher_email"
          }
        }
      },
      "properties": {
        "flight_details": {
          "actual_arrival_time": "2023-07-26T13:00:00",
          "arrival_airport_code": "LAX",
          "arrival_city": "Los Angeles",
          "departure_airport_code": "JFK",
          "departure_city": "New York",
          "expected_arrival_time": "2023-07-26T12:00:00",
          "flight_number": "AA101",
          "flight_status": "Delayed",
          "pnr_booking_id": "ABC123",
          "time_length_of_delay": 60
        },
        "passengers": [
          {
            "first_name": "John",
            "last_name": "Doe",
            "passenger_type": "adult",
            "voucher": {
              "expiry_date": "2023-07-31",
              "unique_voucher_code": "Voucher123",
              "voucher_value": 50
            }
          },
          {
            "first_name": "Jane",
            "last_name": "Doe",
            "passenger_type": "child",
            "voucher": {
              "expiry_date": null,
              "unique_voucher_code": null,
              "voucher_value": null,
              "message": "Passenger must be over 18 years old"
            }
          }
        ]
      }
    }
  }
}
Test Event Name
test

Response
{
  "statusCode": 200,
  "body": "\"Event processed successfully.\"",
  "payload": {
    "data": {
      "type": "event",
      "attributes": {
        "profile": {
          "data": {
            "type": "profile",
            "attributes": {
              "email": "default@example.com"
            }
          }
        },
        "metric": {
          "data": {
            "type": "metric",
            "attributes": {
              "name": "OTPG voucher_email"
            }
          }
        },
        "properties": {
          "flight_details": {
            "actual_arrival_time": "2023-07-26T13:00:00",
            "expected_arrival_time": "2023-07-26T12:00:00",
            "pnr_booking_id": "TVUVPJ-b2eb72",
            "time_length_of_delay": 60
          },
          "passengers": [
            {
              "first_name": null,
              "last_name": null,
              "passenger_type": "adult",
              "voucher": {
                "expiry_date": "2024-12-16 19:50:02",
                "unique_voucher_code": "VCHR-VFZVVlBK",
                "voucher_value": 60
              }
            },
            {
              "first_name": "Unknown",
              "last_name": "Unknown",
              "passenger_type": "child",
              "voucher": {
                "expiry_date": "2024-12-16 19:50:02",
                "unique_voucher_code": "CHILD-VCHR-VFZVVlBK",
                "voucher_value": 30,
                "message": "Passenger must be over 18 years old"
              }
            }
          ]
        }
      }
    }
  }
}

Function Logs
START RequestId: 4f47b20e-4bd5-4512-adc1-b941f937646a Version: $LATEST
ID value received: TVUVPJ-b2eb72
Fetching item with key: {'ID': 'TVUVPJ-b2eb72'}
DynamoDB response: {'Item': {'ArrivalCity': 'Toronto Pearson ', 'VoucherValue': '$60CAD', 'DepartureCity': 'Vancouver ', 'PassengerFirstName': 'CHARLES', 'ArrivalAirportCode': 'YYZ', 'PassengerLastName': 'SUAREZ', 'Email': None, 'PNR': 'TVUVPJ', 'VoucherID': 'n/a', 'VoucherExpiryDate': '2024-12-16 19:50:02', 'FlightStatus': 'delayed', 'VoucherCode': 'VCHR-VFZVVlBK', 'ID': 'TVUVPJ-b2eb72', 'DepartureAirportCode': 'YVR', 'FlightNumber': '602'}, 'ResponseMetadata': {'RequestId': 'EC13DN5SGD3H1LE4NM8DFDHTGVVV4KQNSO5AEMVJF66Q9ASUAAJG', 'HTTPStatusCode': 200, 'HTTPHeaders': {'server': 'Server', 'date': 'Fri, 18 Oct 2024 18:10:09 GMT', 'content-type': 'application/x-amz-json-1.0', 'content-length': '490', 'connection': 'keep-alive', 'x-amzn-requestid': 'EC13DN5SGD3H1LE4NM8DFDHTGVVV4KQNSO5AEMVJF66Q9ASUAAJG', 'x-amz-crc32': '2603277233'}, 'RetryAttempts': 0}}
Email fetched: None
Klaviyo response: 
END RequestId: 4f47b20e-4bd5-4512-adc1-b941f937646a
REPORT RequestId: 4f47b20e-4bd5-4512-adc1-b941f937646a	Duration: 3934.30 ms	Billed Duration: 3935 ms	Memory Size: 128 MB	Max Memory Used: 80 MB	Init Duration: 300.05 ms

Request ID
4f47b20e-4bd5-4512-adc1-b941f937646a
