import requests
import json

# Set API endpoint and token
api_endpoint = "https://a.klaviyo.com/api/events/"
endpoint_token = "YOUR_PRIVATE_API_KEY"  # Replace with your Private API Key

# Read payload from JSON file
with open('payload.json') as f:
    payload = json.load(f)

# Set headers
headers = {
    "Authorization": f"Bearer {endpoint_token}",  # Ensure proper token format
    "Content-Type": "application/json"
}

# Send POST request with proper authentication and JSON payload
response = requests.post(api_endpoint, headers=headers, data=json.dumps(payload))

# Print the response
print(f"Status Code: {response.status_code}")
print(f"Response Body: {response.text}")
